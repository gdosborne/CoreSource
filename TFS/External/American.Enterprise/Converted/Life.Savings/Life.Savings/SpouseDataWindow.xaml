<Window x:Class="Life.Savings.SpouseDataWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Life.Savings"
        xmlns:rules="clr-namespace:Life.Savings.Rules"
        xmlns:conv="clr-namespace:Life.Savings.Converters"
        mc:Ignorable="d" Name="ThisWindow"
        Title="Life Savings II Spouse as Principal Insured Parameters" 
        MaxHeight="540" MinHeight="540" MinWidth="825" ResizeMode="CanResize" >
    <Window.DataContext>
        <local:SpouseDataWindowView PropertyChanged="SpouseDataWindowView_PropertyChanged" ShowPremiumCalc="SpouseDataWindowView_ShowPremiumCalc" />
    </Window.DataContext>
    <Window.Resources>
        <conv:PercentageConverter x:Key="PercentageConverter"/>
        <conv:CurrencyConverter x:Key="CurrencyConverter" />
        <conv:TelephoneConverter x:Key="TelephoneConverter" />
        <conv:IntegerConverter x:Key="IntegerConverter" />
    </Window.Resources>
    <Border Name="PrimaryBorder" Grid.Column="1" Style="{StaticResource GlobalBorder}">
        <Grid Name="PrimaryGrid" Margin="5,5,0,5">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition />
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Label Content="Spouse Name" Grid.Column="0" />
                <TextBox Name="ClientFirstNameTextBox" Grid.Column="1" Text="{Binding SpouseFirstName,UpdateSourceTrigger=PropertyChanged}" GotFocus="TextBox_GotFocus" />
                <TextBox Grid.Column="2" Width="30" CharacterCasing="Upper" Text="{Binding SpouseMiddleInitial,UpdateSourceTrigger=PropertyChanged}" GotFocus="TextBox_GotFocus" MaxLength="1" TextAlignment="Center" />
                <TextBox Grid.Column="3" Text="{Binding SpouseLastName,UpdateSourceTrigger=PropertyChanged}" GotFocus="TextBox_GotFocus" />
            </Grid>
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition />
                    <ColumnDefinition Width="auto"/>
                </Grid.ColumnDefinitions>
                <Label Content="Age" Grid.Column="0" />
                <TextBox Grid.Column="1" Width="30" TextAlignment="Right" GotFocus="TextBox_GotFocus" Style="{StaticResource NumericTextBoxWithReadOnlyBackground}">
                    <TextBox.Text>
                        <Binding Path="SpouseAge" UpdateSourceTrigger="LostFocus" Mode="TwoWay" Converter="{StaticResource IntegerConverter}">
                            <Binding.ValidationRules>
                                <rules:IntegerTextBoxValidationRule />
                            </Binding.ValidationRules>
                        </Binding>
                    </TextBox.Text>
                </TextBox>
                <Label Content="or Birthdate" Grid.Column="2" />
                <DatePicker Grid.Column="3" Width="120" VerticalAlignment="Center" VerticalContentAlignment="Center" Padding="0" BorderThickness="1" BorderBrush="{Binding ElementName=ClientFirstNameTextBox,Path=BorderBrush}" SelectedDate="{Binding SpouseBirthDate,UpdateSourceTrigger=PropertyChanged}" />
                <Label Content="Gender" Grid.Column="4" Margin="50,0,0,0" />
                <ComboBox Grid.Column="5" Width="100" HorizontalAlignment="Left" ItemsSource="{Binding Genders}" SelectedItem="{Binding SpouseGender,UpdateSourceTrigger=LostFocus,Mode=TwoWay}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Name}" />
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
                <Label Content="State of Residence" Grid.Column="6" HorizontalAlignment="Right" />
                <ComboBox Grid.Column="7" Width="100" HorizontalAlignment="Left" ItemsSource="{Binding States}" SelectedItem="{Binding SpouseState,UpdateSourceTrigger=LostFocus,Mode=TwoWay}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Abbreviation}" />
                                <TextBlock Text=" (" />
                                <TextBlock Text="{Binding Name}" />
                                <TextBlock Text=")" />
                            </StackPanel>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
            </Grid>
            <Grid Grid.Row="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition />
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition Width="auto" />
                </Grid.ColumnDefinitions>
                <Label Content="Plan Type" Grid.Column="0" />
                <ComboBox Grid.Column="1" Width="160" HorizontalAlignment="Left" ItemsSource="{Binding ClientPlanTypes}" SelectedItem="{Binding SpousePlanType,UpdateSourceTrigger=LostFocus,Mode=TwoWay}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding}" />
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
                <Label Content="Initial Specified Death Benefit" Grid.Column="2" />
                <TextBox Grid.Column="3" Width="100" TextAlignment="Right" GotFocus="TextBox_GotFocus" Style="{StaticResource NumericTextBoxWithReadOnlyBackground}">
                    <TextBox.Text>
                        <Binding Path="SpouseInitialDeathBenefit" UpdateSourceTrigger="LostFocus" Mode="TwoWay" StringFormat="C" Converter="{StaticResource CurrencyConverter}">
                            <Binding.ValidationRules>
                                <rules:DecimalTextBoxValidationRule />
                            </Binding.ValidationRules>
                        </Binding>
                    </TextBox.Text>
                </TextBox>
            </Grid>
            <Grid Grid.Row="3">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition />
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Label Content="Current Interest Rate" Grid.Column="0" />
                <TextBox Grid.Column="1" Width="60" HorizontalAlignment="Left" TextAlignment="Right" GotFocus="TextBox_GotFocus" Style="{StaticResource NumericTextBoxWithReadOnlyBackground}">
                    <TextBox.Text>
                        <Binding Path="SpouseInterestRate" UpdateSourceTrigger="LostFocus" Mode="TwoWay" StringFormat="P" Converter="{StaticResource PercentageConverter}">
                            <Binding.ValidationRules>
                                <rules:DecimalTextBoxValidationRule />
                            </Binding.ValidationRules>
                        </Binding>
                    </TextBox.Text>
                </TextBox>
                <!--<TextBlock Text="%" Grid.Column="2" HorizontalAlignment="Left" VerticalAlignment="Center"/>-->
                <Label Content="Option Code" Grid.Column="3" />
                <ComboBox Grid.Column="4" ItemsSource="{Binding ClientBenfitOptions}" SelectedItem="{Binding SpouseBenefitOption,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding DisplayedValue}" />
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
            </Grid>
            <GroupBox Grid.Row="4" Header="Additional Features and Riders for Spouse" Margin="0,0,5,0" BorderBrush="{Binding ElementName=ClientFirstNameTextBox,Path=BorderBrush}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="140" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <TextBlock TextAlignment="Center" Grid.Column="0" Grid.Row="0" TextWrapping="Wrap" Grid.RowSpan="2" VerticalAlignment="Bottom" Margin="5,0">
							Table Rating (Substandard)
                    </TextBlock>
                    <TextBlock TextAlignment="Center" Grid.Column="1" Grid.Row="0" TextWrapping="Wrap" Grid.RowSpan="2" VerticalAlignment="Bottom" Margin="5,0">
							Disability Waiver of Cost of Insurance Rider
                    </TextBlock>
                    <TextBlock TextAlignment="Center" Grid.Column="2" Grid.Row="0" TextWrapping="Wrap" Grid.RowSpan="2" VerticalAlignment="Bottom" Margin="5,0">
							Guaranteed Added Death Benefit Rider
                    </TextBlock>
                    <TextBlock TextAlignment="Center" Grid.Column="3" Grid.Row="0" TextWrapping="Wrap" Grid.RowSpan="2" VerticalAlignment="Bottom" Margin="5,0">
							Cost of Living Increase Benefit Rider
                    </TextBlock>
                    <TextBlock TextAlignment="Center" Grid.Column="4" Grid.Row="0" TextWrapping="Wrap" Grid.ColumnSpan="2" VerticalAlignment="Bottom" Margin="5,0">
							Term Insurance Rider
                    </TextBlock>
                    <TextBlock TextAlignment="Center" Grid.Column="4" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Bottom" Margin="5,0">
							Death Benefit Amount
                    </TextBlock>
                    <TextBlock TextAlignment="Center" Grid.Column="5" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Bottom" Margin="5,0">
							Years or to Age
                    </TextBlock>
                    <ComboBox Grid.Row="2" Grid.Column="0" Margin="5" ItemsSource="{Binding SubstandardRates}" SelectedItem="{Binding SpouseSubStandardRate,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding DisplayedValue}" />
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                    <ComboBox Grid.Row="2" Grid.Column="1" Margin="5" ItemsSource="{Binding ClientWpds}" SelectedItem="{Binding SpouseWpd,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding DisplayedValue}" />
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                    <ComboBox Grid.Row="2" Grid.Column="2" Margin="5" ItemsSource="{Binding ClientGpos}" SelectedItem="{Binding SpouseGpo,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding DisplayedValue}" />
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                    <ComboBox Grid.Row="2" Grid.Column="3" Margin="5" ItemsSource="{Binding ClientColas}" SelectedItem="{Binding SpouseCola,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding DisplayedValue}" />
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                    <TextBox Grid.Row="2" Grid.Column="4" Margin="5" TextAlignment="Right" GotFocus="TextBox_GotFocus" Style="{StaticResource NumericTextBoxWithReadOnlyBackground}">
                        <TextBox.Text>
                            <Binding Path="SpouseDeathBenefitAmount" UpdateSourceTrigger="LostFocus" Mode="TwoWay" StringFormat="C" Converter="{StaticResource CurrencyConverter}">
                                <Binding.ValidationRules>
                                    <rules:DecimalTextBoxValidationRule />
                                </Binding.ValidationRules>
                            </Binding>
                        </TextBox.Text>
                    </TextBox>
                    <StackPanel Orientation="Horizontal" Grid.Row="2" Grid.Column="5" Margin="5">
                        <TextBox Width="40" Margin="0,0,0,0" TextAlignment="Right" GotFocus="TextBox_GotFocus" Style="{StaticResource NumericTextBoxWithReadOnlyBackground}">
                            <TextBox.Text>
                                <Binding Path="SpouseTermYears" UpdateSourceTrigger="LostFocus" Mode="TwoWay" Converter="{StaticResource IntegerConverter}">
                                    <Binding.ValidationRules>
                                        <rules:IntegerTextBoxValidationRule />
                                    </Binding.ValidationRules>
                                </Binding>
                            </TextBox.Text>
                        </TextBox>
                        <ComboBox Width="80"  ItemsSource="{Binding ClientYearToAgeOptions}" SelectedItem="{Binding SpouseYearToAgeOption,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding DisplayedValue}" />
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                        </ComboBox>
                    </StackPanel>
                </Grid>
            </GroupBox>
            <GroupBox Grid.Row="5" Header="Illustrate Using" Margin="0,0,5,0" BorderBrush="{Binding ElementName=ClientFirstNameTextBox,Path=BorderBrush}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto" />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0" Orientation="Vertical" VerticalAlignment="Center" Margin="0,0,10,0">
                        <RadioButton Content="Guideline Premium" GroupName="Premium" Margin="0,5" IsChecked="{Binding IsSpouseGuidelineChecked}"/>
                        <RadioButton Content="Target Premium" GroupName="Premium" Margin="0,5" IsChecked="{Binding IsSpouseTargetChecked}" />
                        <RadioButton Content="Minimum Premium" GroupName="Premium" Margin="0,5" IsChecked="{Binding IsSpouseMinimumChecked}" />
                    </StackPanel>
                    <Grid Grid.Column="1" Grid.Row="0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <TextBlock Grid.Row="0" Grid.Column="0" TextWrapping="Wrap" VerticalAlignment="Top" TextAlignment="Center" Margin="5,0">
								"Quick" Illustration Using Current Options (above) and Annual Premium (selected at left)
                        </TextBlock>
                        <TextBlock Grid.Row="0" Grid.Column="1" TextWrapping="Wrap" VerticalAlignment="Top" TextAlignment="Center" Margin="5,0">
								Display/Change Planned Premium, Mode, Lump Sum Payments or Target Cash Values Before Illustrating
                        </TextBlock>
                        <TextBlock Grid.Row="0" Grid.Column="2" TextWrapping="Wrap" VerticalAlignment="Top" TextAlignment="Center" Margin="5,0">
								Display and Make Policy Changes for Future Years Before Illustrating
                        </TextBlock>
                        <Button Content="Illustrate" Grid.Row="1" Grid.Column="0" IsDefault="True" Command="{Binding IllustrateCommand}" />
                        <Button Content="Premium Calc" Grid.Row="1" Grid.Column="1" Command="{Binding PremiumCommand}" />
                        <Button Content="Future Changes" Grid.Row="1" Grid.Column="2" Command="{Binding FutureYearsCommand}" />
                    </Grid>
                </Grid>
            </GroupBox>
            <Grid Grid.Row="7" Visibility="{Binding PrimaryDataVisibility}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
            </Grid>
            <Grid Grid.Row="8" Visibility="{Binding PrimaryDataVisibility}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
            </Grid>
            <GroupBox Header="Retain Spouse Data" HorizontalAlignment="Center" Grid.Row="9" Visibility="{Binding SpouseVisibility}" Margin="0,10">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"/>
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto"/>
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <CheckBox Content="Spouse is principal insured" IsChecked="{Binding IsSpousePrincipalInsured,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}" Grid.Column="0" Grid.ColumnSpan="2" Margin="10,5" Grid.Row="0" />
                    <Button Content="OK" Grid.Row="1" Grid.Column="0" Command="{Binding SpouseOKCommand}" />
                    <TextBlock VerticalAlignment="Center" Grid.Row="1" Grid.Column="1" Text="Retain data and return to Principal Insured Parameter Display" Margin="10,0" />
                    <Button Content="Cancel" Grid.Row="2" Grid.Column="0" Command="{Binding SpouseCancelCommand}" />
                    <TextBlock VerticalAlignment="Center" Grid.Row="2" Grid.Column="1" Text="Discard data and return to Principal Insured Parameter Display" Margin="10,0" />
                </Grid>
            </GroupBox>
        </Grid>
    </Border>
</Window>
